<!DOCTYPE html>
<html>
<head>
    <title>Met Museum ASCII Art</title>
    <style>
        body { font-family: monospace; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .artwork { position: relative; border: 1px solid #ddd; padding: 15px; border-radius: 8px; }
        .artwork img { width: 100%; height: 300px; object-fit: cover; border-radius: 4px; }
        .ascii-overlay { 
            display: none;
            position: absolute;
            top: 15px;
            left: 15px;
            width: calc(100% - 30px);
            height: 300px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            font-size: 4px;
            line-height: 4px;
            overflow: hidden;
            white-space: pre;
            font-family: monospace;
        }
        .artwork:hover .ascii-overlay { display: block; }
        h3 { margin: 10px 0 5px; }
        p { color: #666; margin: 5px 0; }
        .ascii-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            padding: 20px;
            box-sizing: border-box;
            overflow: auto;
        }
        .ascii-page img {
            max-width: 800px;
            margin: 0 auto;
            display: block;
        }
        .ascii-page pre {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 6px;
            line-height: 6px;
            white-space: pre;
            font-family: monospace;
            mix-blend-mode: difference;
        }
        .close-button {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Met Museum ASCII Art Gallery</h1>
    <div class="gallery" id="gallery"></div>
    <div id="ascii-page" class="ascii-page">
        <div class="close-button" onclick="closeAsciiPage()">Ã—</div>
        <img id="full-image">
        <pre id="full-ascii"></pre>
    </div>

    <script>
        const artworks = [
            {
                image: "https://images.metmuseum.org/CRDImages/ep/original/DT1567.jpg",
                title: "Bridge over a Pond of Water Lilies",
                artist: "Claude Monet"
            },
            // ... (previous artwork entries remain the same)
        ];

        function generateASCII(img, width) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const chars = '@#8&OLlv+;:,.';
            
            canvas.width = width;
            canvas.height = width * (img.height / img.width);
            
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            const pixels = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
            
            let ascii = '';
            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    const idx = (y * canvas.width + x) * 4;
                    const brightness = (pixels[idx] + pixels[idx + 1] + pixels[idx + 2]) / 3;
                    const char = chars[Math.floor(brightness / 256 * chars.length)];
                    ascii += char;
                }
                ascii += '\n';
            }
            return ascii;
        }

        function showAsciiPage(img) {
            const fullImage = document.getElementById('full-image');
            const fullAscii = document.getElementById('full-ascii');
            const asciiPage = document.getElementById('ascii-page');
            
            fullImage.src = img.src;
            fullImage.onload = () => {
                fullAscii.textContent = generateASCII(fullImage, 150);
            };
            asciiPage.style.display = 'block';
        }

        function closeAsciiPage() {
            document.getElementById('ascii-page').style.display = 'none';
        }

        artworks.forEach(art => {
            const div = document.createElement('div');
            div.className = 'artwork';
            
            const img = new Image();
            img.src = art.image;
            img.alt = art.title;
            
            img.onload = () => {
                const ascii = document.createElement('div');
                ascii.className = 'ascii-overlay';
                ascii.textContent = generateASCII(img, 80);
                div.appendChild(ascii);
            };
            
            img.onclick = () => showAsciiPage(img);
            
            div.innerHTML = `
                <img src="${art.image}" alt="${art.title}">
                <h3>${art.title}</h3>
                <p>${art.artist}</p>
            `;
            
            document.getElementById('gallery').appendChild(div);
        });
    </script>
</body>
</html>
